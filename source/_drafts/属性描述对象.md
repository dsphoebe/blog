---
title: 属性描述对象
tags: [JavaScript 教程 - 笔记]
---

这是读阮一峰老师的《JavaScript 教程》系列笔记第 21 篇《属性描述对象》

JavaScript 提供了一个内部数据结构，用来描述对象的属性，控制它的行为，比如该属性是否可写、是否可遍历。这个内部数据结构称为“属性描述对象”（attributes object）。每个属性都有自己对应的属性描述对象，保存该属性的一些元信息。

```js
{
	value: undefined,
  writable: true,
  enumerable: true, // 如果是 false，for...in 与 Object.keys() 将忽略这个值
  configurable: true, // 控制除了 value 以外的属性描述对象的可写性
  get: undefined,// 该属性的取值函数，默认 undefined
  set: undefined // 该属性的存值函数，默认 undefined
}
```

Object.getOwnPropertyDescriptor(obj, property) 获取对象的自身某个属性的属性描写对象。

Object.defineProperty(obj, property, attributesObject) 定义或修改对象 obj 的某个属性 property 的属性描写对象 attributesObject，返回定义或修改后的对象 obj。

不允许同时设置 value 和 get，就是 undefined 都不行，不允许同时设置 writable 和 get。

```js
var obj = {};

Object.defineProperty(obj, 'p', {
  value: undefined,
  get: undefined
});
// TypeError: Invalid property.
// A property cannot both have accessors and be writable or have a value

Object.defineProperty(obj, 'p', {
  writable: false,
  get: undefined
});
// TypeError: Invalid property descriptor.
// Cannot both specify accessors and a value or writable attribute
```

Object.defineProperty 和 Object.defineProperties 参数里面的属性描述对象 writable、configurable、enumerable 属性的默认值都是 false。

## 元属性

控制对象属性的属性

正常模式下，writable 为 false，修改对象的属性值时，会默默失败，不会有报错。严格模式下会报错。

如果原型对象的某个属性的 writable 是 false，它的子对象将无法自定义这个属性。可以通过覆盖属性描述对象，绕过这个限制。